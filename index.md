# Настройка визуального представления компонента "Таблица" в Wasaby

Контрол Controls/grid:View является компонентом, обеспечивающим представление данных в виде таблицы с поддержкой широкого набора возможностей, таких как сортировка, фильтрация, редактирование, настройка колонок и т.д. Данный контрол является частью фреймфорка Wasaby и активно используется в построении сложных пользовательских интерфейсов, работающих с большими объемами структурированных данных.

### Основные возможности:

1. **Отображение данных в табличном виде:**
   Контрол позволяет отобразить данные в строках и колонках, применяя различные способы настройки.

2. **Сортировка:**
   Контрол поддерживает возможность сортировки и фильтрации данных. Важно, что можно комбинировать несколько уровней сортировки, что позволяет гибко управлять отображением данных. Фильтры могут применяться как к отдельным колонкам, так и ко всему набору данных в целом.

4. **Редактирование данных:**
   Одной из ключевых особенностей является поддержка режима редактирования прямо в таблице. Можно редактировать значения отдельных ячеек без необходимости перехода на отдельную форму редактирования.

5. **Настраиваемые колонки:**
   Пользователи могут изменять набор отображаемых колонок, их порядок и ширину. Это особенно полезно, когда данные содержат множество атрибутов.

6. **Поддержка работы с большими объемами данных:**
   Контрол эффективно работает с большими наборами данных благодаря механизму виртуализации, который подгружает только те строки, которые видны пользователю. Это улучшает производительность и скорость работы интерфейса.



### Основные свойства:

- **`columns`** – определяет набор колонок, которые будут отображены в таблице. Для каждой колонки можно задать отображаемое название, тип данных, ширину, а также формат отображения.

```javascript
columns: [
  {
    displayProperty: 'name',
    width: '1fr',
    template: 'wml!path/to/template'
  },
  {
    displayProperty: 'age',
    width: '50px'
  }
]

```

- **`source`** – источник данных для таблицы. Это может быть массив данных или контроллер, который загружает данные асинхронно.

```javascript
source: new Memory({
  keyProperty: 'id',
  data: [
    {id: 1, name: 'Alan', age: 30},
    {id: 2, name: 'Kate', age: 25}
  ]
})

```

- **`keyProperty`** – уникальный идентификатор строки. Он используется для отслеживания состояния строк.

```javascript
keyProperty: 'id'

```

- **`multiSelectVisibility`** – определяет, будет ли отображаться чекбокс для выбора нескольких строк. Может принимать значения `'visible'`, `'onhover'` или `'hidden'`.

```javascript
multiSelectVisibility: 'visible'

```

- **`header`** – определяет заголовки для каждой колонки. Это может быть массив строк или набор настроек для каждой колонки.

```javascript
header: [
  { title: 'Name' },
  { title: 'Age' }
]

```

**Пример использования:**

```javascript
<Controls.grid:View
    source="{{_viewSource}}"
    keyProperty="id"
    columns="{{_columns}}"
    multiSelectVisibility="onhover"
    header="{{_header}}"
/>

```

### Расширенные возможности:

- **Custom Templates:** Контрол позволяет использовать пользовательские шаблоны для отображения данных в ячейках. Это может быть полезно, если необходимо кастомизировать отображение данных (например, добавление иконок, кнопок и т.д.).

```javascript
columns: [
  {
    displayProperty: 'name',
    template: 'wml!path/to/customTemplate'
  }
]

```

- **Drag-and-Drop:** Поддержка перетаскивания строк между таблицами или внутри одной таблицы, что может быть полезно для изменения порядка строк или для перемещения данных.

- **Разноуровневый выбор:** Возможность выбирать как отдельные строки, так и группы строк. Поддерживается выбор нескольких элементов одновременно.

#

### Пример создания и настройки таблицы

В этой инструкции рассмотрим, как создать таблицу с данными о городах, используя компонент "Таблица".

#### Шаг 1. Импорт необходимых модулей

```TypeScript
// Импортируем шаблоны для отображения ячеек с результатами
import * as numberResultTpl from 'wml!Controls-demo/gridNew/resources/ResultCellTemplates/Number';

// Импортируем интерфейсы для колонок и данных
import { IColumn, IHeaderCell } from 'Controls/grid';

```
#### Шаг 2. Подготовка данных
Создаем массив данных для отображения информации о городах. В этом примере будут указаны город, страна, численность населения и площадь.

```TypeScript
// Список городов и их характеристик
const CITIES = [
    {
        key: 1,
        city: 'Москва',
        country: 'Россия',
        population: 12655050,
        area: 2561,
    },
    {
        key: 2,
        city: 'Нью-Йорк',
        country: 'США',
        population: 8419600,
        area: 789,
    },
    {
        key: 3,
        city: 'Пекин',
        country: 'Китай',
        population: 21540000,
        area: 16410,
    },
    {
        key: 4,
        city: 'Сидней',
        country: 'Австралия',
        population: 5312163,
        area: 12368,
    },
];
```

#### Шаг 3. Определение колонок
Задаем колонки, которые будут отображаться в таблице.

```TypeScript
// Определяем колонки для таблицы
const columns: IColumn[] = [
    { displayProperty: 'city', caption: 'Город' }, // Отображение названия города
    { displayProperty: 'country', caption: 'Страна' }, // Отображение страны
    { displayProperty: 'population', caption: 'Население', resultTemplate: numberResultTpl }, // Население
    { displayProperty: 'area', caption: 'Площадь (км²)', resultTemplate: numberResultTpl }, // Площадь
];

```

#### Шаг 4. Определение заголовков таблицы
Задаем заголовки для каждой из колонок.

```TypeScript
const header: IHeaderCell[] = [
    { caption: 'Город' },
    { caption: 'Страна' },
    { caption: 'Население' },
    { caption: 'Площадь (км²)' },
];

```

#### Шаг 5. Отображение таблицы
Теперь можно интегрировать данные и колонки в компонент таблицы.

```TypeScript
// Компонент таблицы с данными
<Controls.grid:View
    keyProperty="key" // Уникальный идентификатор для строк
    columns="{{columns}}" // Передаем колонки
    items="{{CITIES}}" // Передаем данные для отображения
    header="{{header}}" // Передаем заголовки колонок
    resultsVisibility="visible" // Включаем отображение результатов по колонкам
    resultsPosition="bottom" // Положение итогов внизу таблицы
/>

```

#### Шаг 6. Результаты
Для колонок с числовыми данными, например "Население" и "Площадь", можно добавить отображение итогов (например, общую площадь всех городов).

```TypeScript
// Определение результатов для колонок
const results = {
    population: 47926813, // Общая численность населения
    area: 32128, // Общая площадь
};

```

#### Итоговый код:

```TypeScript
import * as numberResultTpl from 'wml!Controls-demo/gridNew/resources/ResultCellTemplates/Number';
import { IColumn, IHeaderCell } from 'Controls/grid';

// Данные о городах
const CITIES = [
    { key: 1, city: 'Москва', country: 'Россия', population: 12655050, area: 2561 },
    { key: 2, city: 'Нью-Йорк', country: 'США', population: 8419600, area: 789 },
    { key: 3, city: 'Пекин', country: 'Китай', population: 21540000, area: 16410 },
    { key: 4, city: 'Сидней', country: 'Австралия', population: 5312163, area: 12368 },
];

// Колонки для таблицы
const columns: IColumn[] = [
    { displayProperty: 'city', caption: 'Город' },
    { displayProperty: 'country', caption: 'Страна' },
    { displayProperty: 'population', caption: 'Население', resultTemplate: numberResultTpl },
    { displayProperty: 'area', caption: 'Площадь (км²)', resultTemplate: numberResultTpl },
];

// Заголовки таблицы
const header: IHeaderCell[] = [
    { caption: 'Город' },
    { caption: 'Страна' },
    { caption: 'Население' },
    { caption: 'Площадь (км²)' },
];

// Результаты для числовых колонок
const results = {
    population: 47926813,
    area: 32128,
};

// Компонент таблицы
<Controls.grid:View
    keyProperty="key"
    columns="{{columns}}"
    items="{{CITIES}}"
    header="{{header}}"
    resultsVisibility="visible"
    resultsPosition="bottom"
/>

```

#### Итоговый вывод:

| Город    | Страна    | Население  | Площадь (км²) |
|----------|-----------|------------|---------------|
| Москва   | Россия    | 12655050 | 2561         |
| Нью-Йорк | США       | 8419600  | 789           |
| Пекин    | Китай     | 21540000 | 16410        |
| Сидней   | Австралия | 5312163  | 12368        |
| **Итого**|           | **47926813** | **32128**   |

#

Используйте ссылки ниже, чтобы найти нужную информацию по интерфейсу компонента:

- [Опции](options.md)
- [Поля](fields.md)
- [Методы](methods.md)
- [События](events.md)
